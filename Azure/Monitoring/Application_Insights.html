them what is Azure monitor how does it
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Azure Monitor vs Application Insights Cheat Sheet</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 0 1em;
            background: #f9f9f9;
            color: #222;
        }
        .container {
            max-width: 800px;
            margin: 32px auto;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 12px #e0e0e0;
            padding: 2em 1.5em;
        }
        h1, h2, h3 {
            color: #0078d4;
        }
        ul, ol {
            margin-bottom: 1.5em;
        }
        li {
            margin-bottom: 0.5em;
            line-height: 1.6;
        }
        .section-title {
            font-weight: bold;
            margin-top: 1.5em;
            color: #333;
            font-size: 1.1em;
        }
        .img-wrapper {
            max-width: 700px;
            margin: 0 auto 1em auto;
            text-align: center;
        }
        .img-wrapper img {
            width: 100%;
            max-width: 700px;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 2px 8px #bbb;
        }
        .img-caption {
            color: #555;
            font-size: 0.97em;
            margin-top: 0.5em;
        }
        pre {
            background: #f8f9fa;
            border-radius: 6px;
            padding: 8px;
            overflow-x: auto;
        }
        @media (max-width: 800px) {
            .container {
                padding: 1em 0.5em;
            }
        }
        @media (max-width: 480px) {
            .container {
                padding: 0.5em 0.2em;
            }
            .img-wrapper img {
                border-radius: 5px;
            }
        }
        .tip {
            background: #e6f7ff;
            border-left: 4px solid #0078d4;
            padding: 0.7em 1em;
            margin: 1em 0;
            color: #005a9e;
            border-radius: 5px;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>Azure Monitor vs Application Insights Cheat Sheet</h1>
    <p>This page summarizes the key differences, use cases, and step-by-step tutorial for using Azure Monitor and Application Insights, based on the video <a href="https://www.youtube.com/watch?v=CiGpCvy0zEE" target="_blank">Azure Monitor vs Application Insights – When to Use Which?</a>.</p>

    <div class="section-title">What is Azure Monitor?</div>
    <ul>
        <li><b>Azure Monitor</b> is a cloud-based monitoring and observability service for collecting, analyzing, and visualizing metrics and logs from your Azure resources and applications.</li>
        <li>It helps you keep an eye on your production environment: errors, latency, usage, and more.</li>
        <li>Azure Monitor is the <b>umbrella service</b> that includes tools like Application Insights, Log Analytics, Alerts, Dashboards, and more.</li>
    </ul>

    <div class="img-wrapper">
        <img src="Images/azure_monitoring.jpg" alt="Azure Monitor Overview">
        <div class="img-caption">Azure Monitor: High-level overview of monitoring components and flow in Azure.</div>
    </div>

    <div class="section-title">What is Application Insights?</div>
    <ul>
        <li><b>Application Insights</b> is a feature of Azure Monitor focused on <b>application performance monitoring (APM)</b>.</li>
        <li>It helps you detect, diagnose, and optimize application performance in real time.</li>
        <li>Tracks requests, dependencies, exceptions, user behavior, and more.</li>
        <li>Great for troubleshooting slow responses, errors, and usage anomalies.</li>
    </ul>

    <div class="section-title">When to Use Which?</div>
    <ul>
        <li>Use <b>Azure Monitor</b> for <b>infrastructure-level</b> monitoring (VMs, databases, networks, etc.) and to get a holistic view of your Azure environment.</li>
        <li>Use <b>Application Insights</b> for <b>application-level</b> monitoring (web apps, APIs, background services) to analyze performance, errors, and user behavior.</li>
        <li>They are <b>connected</b>: Application Insights data is available in Azure Monitor, and you can set up alerts, dashboards, and analytics across both.</li>
    </ul>

    <div class="section-title">Step-by-Step: Setting Up Application Insights in Azure Portal</div>
    <ol>
        <li>Go to the <b>Azure Portal</b> (<a href="https://portal.azure.com" target="_blank">portal.azure.com</a>).</li>
        <li>Search for <b>Application Insights</b> in the top search bar.</li>
        <li>Click <b>+ Create</b> to add a new Application Insights resource.</li>
        <li>Fill in the required details (Resource name, Subscription, Resource Group, Region, etc.).</li>
        <li>Choose the <b>Application Type</b> (ASP.NET, Node.js, etc.).</li>
        <li>Click <b>Review + Create</b> and then <b>Create</b>.</li>
        <li>Once deployed, open your Application Insights resource.</li>
        <li>Follow the <b>Getting Started</b> instructions to instrument your app (copy the Instrumentation Key or Connection String and add it to your app's configuration).</li>
        <li>Deploy your app and generate some traffic (open the app, use features, etc.).</li>
        <li>Return to Application Insights in the portal to view metrics, failures, performance, and logs.</li>
    </ol>

    <div class="section-title">How to Connect Application Insights to Your Deployed Azure Web App</div>
    <ol>
        <li>In the Azure Portal, go to your deployed web app (e.g., <b>monitorapp-web</b>).</li>
        <li>In the left menu, expand <b>Monitoring</b> and click <b>Application Insights</b> (it may be under Monitoring, not in the main menu).</li>
        <li>If not enabled, click <b>Enable Application Insights</b> (you can do this without redeploying your code).</li>
        <li>Select <b>Create new resource</b> (or choose an existing one), pick Subscription, Resource Group, and Region.</li>
        <li>Click <b>Apply</b> or <b>Review + Create</b> and then <b>Create</b>.</li>
        <li>Azure will auto-instrument supported stacks (like .NET, Node.js, Java). For custom stacks, add the Application Insights SDK and use the Instrumentation Key/Connection String in your app config.</li>
        <li><b>Restart</b> your web app from the Overview blade after enabling.</li>
        <li>Visit your app (including <code>/error</code>) to generate telemetry data.</li>
        <li>Return to Application Insights in the portal to view telemetry: Failures, Performance, Live Metrics, and Logs.</li>
    </ol>
    <div class="tip">
        <b>Where are Application Insights keys added?</b><br>
        When you enable Application Insights for your Azure Web App, several keys are automatically added as <b>Application Settings</b> (environment variables) in your Web App's configuration.<br><br>
        <b>How to view them:</b>
        <ol>
            <li>In the Azure Portal, go to your Web App (e.g., <b>MonitorApp-web</b>).</li>
            <li>In the left menu, under <b>Settings</b>, click <b>Configuration</b>.</li>
            <li>Under the <b>Application settings</b> tab, you'll see these keys listed.</li>
        </ol>
        <b>Common Application Insights keys:</b>
        <ul>
            <li><code>APPINSIGHTS_INSTRUMENTATIONKEY</code></li>
            <li><code>APPLICATIONINSIGHTS_CONNECTION_STRING</code></li>
            <li><code>APPINSIGHTS_PROFILERFEATURE_VERSION</code></li>
            <li><code>APPINSIGHTS_SNAPSHOTFEATURE_VERSION</code></li>
            <li><code>ApplicationInsightsAgent_EXTENSION_VERSION</code></li>
            <li><code>DiagnosticServices_EXTENSION_VERSION</code></li>
            <li><code>InstrumentationEngine_EXTENSION_VERSION</code></li>
            <li><code>SnapshotDebugger_EXTENSION_VERSION</code></li>
            <li><code>XDT_MicrosoftApplicationInsights_BaseExtensions</code></li>
            <li><code>XDT_MicrosoftApplicationInsights_Mode</code></li>
            <li><code>XDT_MicrosoftApplicationInsights_PreemptSdk</code></li>
        </ul>
        <span style="color:#555; font-size:0.97em;">These environment variables are used by the Application Insights agent/SDK to send telemetry from your app to the correct Application Insights resource. You do not need to add them manually if you enabled Application Insights through the portal—they are set for you. You can view, edit, or remove these keys in the <b>Configuration</b> section of your Web App in the Azure Portal.</span>
    </div>
    <div class="img-wrapper">
        <img src="Images/tur-on-application-insight.jpg" alt="Enable Application Insights screenshot">
        <div class="img-caption">Enabling Application Insights for your Azure Web App from the Monitoring section.</div>
    </div>
    <div class="img-wrapper">
        <img src="Images/ENABLE%20application%20insight.jpg" alt="Azure Portal - Enable Application Insights screen">
        <div class="img-caption">Azure Portal: The "Enable Application Insights" screen where you select or create a resource, workspace, and instrumentation options.</div>
    </div>
    <div class="tip"><b>Note:</b> In the Azure Portal, Application Insights is often found under the <b>Monitoring</b> section in the left menu of your Web App. You can enable it without redeploying your code!</div>
    <div class="tip">
        <b>Example: Creating Application Insights Resource</b><br>
        <ul>
            <li><b>Subscription:</b> Visual Studio Enterprise</li>
            <li><b>Resource Group:</b> MonitorApp-rg</li>
            <li><b>Name:</b> MonitorApp-Insights</li>
            <li><b>Region:</b> East US</li>
            <li><b>Log Analytics Workspace:</b> (new) f6ab9759-ffe4-4b77-81f6-e55987b84565-MonitorApp-rg-EUS [eastus]</li>
        </ul>
        <span style="color:#555; font-size:0.97em;">Application Insights provides full observability into your app, including analytics, diagnostics, and user behavior insights. It works for .NET, Node.js, Java EE, and more, whether hosted on-premises, hybrid, or in any public cloud.</span>
    </div>
    <div class="tip"><b>Tip:</b> For manual SDK integration, see the official docs for your language/platform. Most Azure App Services support one-click enablement!</div>

    <div class="tip"><b>Tip:</b> You can set up <b>alerts</b> in Azure Monitor to notify you of errors, performance issues, or usage anomalies detected by Application Insights.</div>

    <div class="section-title">Common Issues You Can Troubleshoot with Application Insights</div>
    <ul>
        <li>Performance problems (slow page loads, delayed API responses)</li>
        <li>Failures and exceptions (HTTP 500 errors, failed dependencies, database errors)</li>
        <li>Usage anomalies (unexpected crashes, drops in user activity)</li>
        <li>Incorrect or inconsistent outputs (different users getting different results)</li>
        <li>Regional or environment-specific issues (problems in one Azure region but not another)</li>
    </ul>

    <div class="img-wrapper">
        <img src="Images/problem-we-can-troublesshoot.jpg" alt="Problems you can troubleshoot with Azure Application Insights">
        <div class="img-caption">Types of problems you can troubleshoot using Azure Application Insights.</div>
    </div>

    <div class="section-title">Extra: KQL (Kusto Query Language)</div>
    <ul>
        <li>Application Insights uses <b>KQL</b> for querying logs and telemetry data.</li>
        <li>KQL looks like SQL but is designed for log and telemetry analytics.</li>
        <li>Example: <pre><code>requests | where duration > 1s | summarize count() by resultCode</code></pre></li>
    </ul>

    <div class="img-wrapper">
        <!-- Paste your screenshots here -->
        <!-- Example: <img src="your-screenshot.png" alt="Azure Portal Screenshot"> -->
        <div class="img-caption">Add your Azure Portal screenshots here for each step!</div>
    </div>
    <div class="tip">
        <b>How to Find /error (Internal Server Error) in Application Insights</b><br>
        <ol>
            <li>Go to your <b>Application Insights</b> resource in the Azure Portal (e.g., <b>MonitorApp-Insights</b>).</li>
            <li>In the left menu, under <b>Investigate</b> or <b>Monitoring</b>, click <b>Failures</b>.<br>
                <span style="color:#555;">Here you’ll see failed requests, including HTTP 500 errors. Click on the <b>/error</b> path or the <b>500</b> status code to see details.</span>
            </li>
            <li>For more details, click <b>Exceptions</b> to view stack traces and error messages (if your app sends exception telemetry).</li>
            <li>You can also use <b>Logs</b> to run a KQL query:<br>
                <pre><code>requests
| where url endswith "/error" and resultCode == "500"
| order by timestamp desc</code></pre>
                <span style="color:#555;">This shows all 500 errors for the /error endpoint.</span>
            </li>
        </ol>
        <b>Summary:</b> Use <b>Failures</b> for a visual overview, <b>Exceptions</b> for stack traces, and <b>Logs</b> for custom queries and deep troubleshooting.

    </div>

    <div class="section-title">Application Insights Interview Questions and Answers</div>
    <ol>
        <li><b>What is Application Insights?</b><br>
            <i>Application Insights is an Azure service for monitoring live applications, providing performance metrics, error tracking, usage analytics, and diagnostic information.</i>
        </li>
        <li><b>How do you enable Application Insights for an Azure Web App?</b><br>
            <i>In the Azure Portal, go to your Web App, select Application Insights under Monitoring, and click Enable. You can link to an existing resource or create a new one.</i>
        </li>
        <li><b>What types of telemetry does Application Insights collect by default?</b><br>
            <i>Requests, dependencies, exceptions, traces, custom events, metrics, and page views (for web apps).</i>
        </li>
        <li><b>How can you add custom telemetry to Application Insights?</b><br>
            <i>By using the Application Insights SDK in your code to track custom events, metrics, or exceptions.</i>
        </li>
        <li><b>What is the difference between Application Insights and Azure Monitor?</b><br>
            <i>Azure Monitor is the umbrella service for monitoring all Azure resources; Application Insights is focused on application-level monitoring and is a feature of Azure Monitor.</i>
        </li>
        <li><b>How do you view failed requests in Application Insights?</b><br>
            <i>Go to the Failures blade in the Application Insights resource to see failed requests, error rates, and details.</i>
        </li>
        <li><b>What is KQL and how is it used in Application Insights?</b><br>
            <i>KQL (Kusto Query Language) is used to query telemetry data in the Logs section for advanced analytics and troubleshooting.</i>
        </li>
        <li><b>How can you monitor application performance using Application Insights?</b><br>
            <i>Use the Performance blade to view response times, dependencies, and identify slow operations or bottlenecks.</i>
        </li>
        <li><b>How do you set up alerts in Application Insights?</b><br>
            <i>Go to the Alerts section, create a new alert rule, and define conditions (e.g., failed requests &gt; threshold) and actions (email, webhook, etc.).</i>
        </li>
        <li><b>What is an Instrumentation Key?</b><br>
            <i>A unique key used by the Application Insights SDK/agent to send telemetry data to the correct resource.</i>
        </li>
        <li><b>How do you find the Instrumentation Key or Connection String?</b><br>
            <i>In the Application Insights resource, go to Properties or Overview to view the Instrumentation Key and Connection String.</i>
        </li>
        <li><b>Can Application Insights monitor applications outside of Azure?</b><br>
            <i>Yes, it can monitor on-premises, hybrid, or other cloud-hosted applications as long as the SDK/agent is configured.</i>
        </li>
        <li><b>How do you filter telemetry data in Application Insights?</b><br>
            <i>Use the Logs (Analytics) feature with KQL queries or apply filters in the portal blades (Failures, Performance, etc.).</i>
        </li>
        <li><b>What is Live Metrics Stream?</b><br>
            <i>A real-time dashboard in Application Insights showing live telemetry, request rates, failures, and performance without delay.</i>
        </li>
        <li><b>How can you reduce telemetry volume (and cost) in Application Insights?</b><br>
            <i>By configuring sampling, filtering out unnecessary telemetry, or adjusting the data retention period.</i>
        </li>
        <li><b>What is dependency tracking in Application Insights?</b><br>
            <i>It tracks calls from your app to external services (databases, APIs, etc.), showing duration, success/failure, and performance impact.</i>
        </li>
        <li><b>How do you diagnose exceptions using Application Insights?</b><br>
            <i>Use the Exceptions blade to view exception details, stack traces, and related request context.</i>
        </li>
        <li><b>How do you export Application Insights data?</b><br>
            <i>Export via Continuous Export, Diagnostic Settings to Log Analytics/Storage/Event Hub, or manually download query results.</i>
        </li>
        <li><b>What is the retention period for Application Insights data?</b><br>
            <i>By default, 90 days, but it can be configured up to 2 years for some data types (with additional cost).</i>
        </li>
        <li><b>How do you integrate Application Insights with DevOps pipelines?</b><br>
            <i>By adding deployment annotations, monitoring release health, and using the Application Insights REST API or Azure DevOps extensions.</i>
        </li>
        <li><b>How do you delete an Application Insights resource?</b><br>
            <i>In the Azure Portal, select the resource, click Delete, and confirm. Ensure it’s not linked to active apps before deleting.</i>
        </li>
    </ol>

</div>
</body>
</html>
