<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dynatrace Monitoring for Azure Functions</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../site.css">
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: #f7f9fa;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 800px;
            margin: 40px auto 40px 40px;
            /* Added left margin for better alignment */
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.09);
            padding: 32px 40px;
        }
        h1, h2, h3, h4 {
            color: #2d3a4b;
            margin-top: 0;
        }
        h1 {
            font-size: 2.1em;
            margin-bottom: 18px;
        }
        h2 {
            font-size: 1.4em;
            margin-bottom: 12px;
        }
        h3 {
            font-size: 1.15em;
            margin-bottom: 8px;
        }
        ul, ol {
            margin-bottom: 18px;
            padding-left: 22px;
        }
        ul li, ol li {
            margin-bottom: 7px;
            line-height: 1.7;
        }
        p {
            margin-bottom: 18px;
            line-height: 1.7;
        }
        a {
            color: #1976d2;
            text-decoration: none;
            word-break: break-all;
        }
        a:hover {
            text-decoration: underline;
        }
        .note {
            background: #e3f2fd;
            border-left: 4px solid #1976d2;
            padding: 12px 18px;
            margin-bottom: 24px;
            color: #17406a;
            border-radius: 4px;
        }
        .warning {
            margin-bottom:32px;
            background:#fffbe7;
            border-left:4px solid #ffb300;
            color:#7a5a00;
            padding:18px 24px;
            border-radius: 4px;
        }
        .info {
            margin-top:32px;
            background:#e3f2fd;
            border-left:4px solid #1976d2;
            color:#17406a;
            padding:18px 24px;
            border-radius: 4px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: #fafbfc;
            margin-bottom: 18px;
            border-radius: 6px;
            overflow: hidden;
        }
        th, td {
            padding: 10px 8px;
            border: 1px solid #d0d7de;
            text-align: left;
        }
        thead tr {
            background: #e3f2fd;
            color: #17406a;
        }
        code {
            background: #f3f3f3;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.98em;
        }
        kbd {
            background: #eee;
            border-radius: 3px;
            border: 1px solid #ccc;
            padding: 2px 6px;
            font-size: 0.95em;
            font-family: 'Consolas', 'Menlo', 'Monaco', monospace;
        }
        @media (max-width: 900px) {
            .container {
                padding: 18px 8px;
            }
            table, th, td {
                font-size: 0.98em;
            }
        }
    </style>
</head>
<body>
    <div class="container warning">
        <h2 style="margin-top:0; color:#b28704;">What is Dynatrace?</h2>
        <p><strong>Dynatrace</strong> is a leading software intelligence platform designed to monitor, analyze, and optimize the performance of applications, infrastructure, and user experiences across cloud and hybrid environments. It leverages artificial intelligence and automation to provide real-time observability, detect anomalies, and deliver actionable insights for DevOps, SRE, and IT teams. Dynatrace supports a wide range of technologies, including cloud-native services, microservices, containers, and serverless functions like Azure Functions.</p>
    
    <h3>Dynatrace History</h3>
    <p></p>
        Dynatrace was founded in 2005 by Bernd Greifeneder in Linz, Austria. The company entered the market that same year with a focus on application performance monitoring (APM). Over time, Dynatrace evolved into a full-stack observability and software intelligence platform, incorporating AI and automation to serve modern cloud-native environments.
    </p>
    <p>
        It became particularly well-known after being acquired by Compuware in 2011, and later spun off as an independent company again, eventually going public in August 2019 (IPO on the NYSE under the ticker <strong>DT</strong>).
    </p>
    </div>
    <div class="container">
        <h1>Dynatrace Monitoring for Azure Functions</h1>
        <div class="note">
            <strong>Can Dynatrace monitor Azure Functions?</strong><br>
            Yes! Dynatrace provides native integration for monitoring Azure Functions. It automatically discovers your serverless functions, collects metrics, traces, and provides AI-powered insights into performance and reliability.
        </div>
        <p><strong>How it works:</strong></p>
        <ul>
            <li>Connect your Azure subscription to Dynatrace for automatic discovery of Azure Functions.</li>
            <li>Collects metrics: invocations, execution time, failures, and more.</li>
            <li>Provides distributed tracing and root cause analysis using AI.</li>
            <li>Visualizes dependencies and performance bottlenecks across your cloud environment.</li>
        </ul>
        <p><strong>Getting started:</strong></p>
        <ul>
            <li>In Dynatrace, go to <em>Settings &gt; Cloud and virtualization &gt; Azure</em> and connect your Azure account.</li>
            <li>Optionally, deploy the Dynatrace OneAgent for deeper monitoring (if using dedicated App Service plans).</li>
            <li>View your Azure Functions and their health in the Dynatrace dashboard.</li>
        </ul>
        <p>Official documentation: <a href="https://www.dynatrace.com/support/help/shortlink/azure-functions" target="_blank">Monitor Azure Functions with Dynatrace</a></p>
        <p>Dynatrace website: <a href="https://www.dynatrace.com/" target="_blank">https://www.dynatrace.com/</a></p>
    </div>

    <div class="container" style="margin-top:32px;">
        <h2>Dynatrace vs. Other Monitoring Tools</h2>
        <p>
            Here’s a high-level comparison of Dynatrace and other popular monitoring tools, including typical pricing models:
        </p>
        <ul>
            <li>
            <strong>Dynatrace:</strong> Subscription-based pricing, typically starting around <b>$69/month per host</b> (billed annually). Pricing may vary based on features, data volume, and environment size. <a href="https://www.dynatrace.com/pricing/" target="_blank">See Dynatrace Pricing</a>
            </li>
            <li>
            <strong>Datadog:</strong> Subscription-based, starting at <b>$18/month per host</b> for infrastructure monitoring. APM, logs, and other features are priced separately. <a href="https://www.datadoghq.com/pricing/" target="_blank">See Datadog Pricing</a>
            </li>
            <li>
            <strong>New Relic:</strong> Free tier available; paid plans start at <b>$0.30/GB of data ingested</b> and $49/month per user for core features. <a href="https://newrelic.com/pricing" target="_blank">See New Relic Pricing</a>
            </li>
            <li>
            <strong>Azure Monitor:</strong> Pay-as-you-go, based on data ingested and retention. For example, <b>$2.76/GB</b> for log data ingestion and $0.10/GB for data retention per month. <a href="https://azure.microsoft.com/en-us/pricing/details/monitor/" target="_blank">See Azure Monitor Pricing</a>
            </li>
        </ul>
        <p style="font-size:0.95em; color:#555;">
            Actual costs depend on your usage, data volume, and selected features. Always check each vendor’s pricing page for the latest details and calculators.
        </p>
        <table>
            <thead>
                <tr>
                    <th>Feature</th>
                    <th>Dynatrace</th>
                    <th>Datadog</th>
                    <th>New Relic</th>
                    <th>Azure Monitor</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>AI-Powered Root Cause Analysis</td>
                    <td>Yes (Davis AI)</td>
                    <td>Yes</td>
                    <td>Yes</td>
                    <td>Limited</td>
                </tr>
                <tr>
                    <td>Full-Stack Observability</td>
                    <td>Yes</td>
                    <td>Yes</td>
                    <td>Yes</td>
                    <td>Yes</td>
                </tr>
                <tr>
                    <td>Automatic Dependency Mapping</td>
                    <td>Yes</td>
                    <td>Partial</td>
                    <td>Partial</td>
                    <td>No</td>
                </tr>
                <tr>
                    <td>Serverless Monitoring (Azure Functions)</td>
                    <td>Yes</td>
                    <td>Yes</td>
                    <td>Yes</td>
                    <td>Yes</td>
                </tr>
                <tr>
                    <td>Ease of Setup</td>
                    <td>Very Easy</td>
                    <td>Easy</td>
                    <td>Easy</td>
                    <td>Native for Azure</td>
                </tr>
                <tr>
                    <td>Pricing Model</td>
                    <td>Subscription (per host/unit)</td>
                    <td>Subscription (per host/unit)</td>
                    <td>Subscription (per host/unit)</td>
                    <td>Pay-as-you-go</td>
                </tr>
            </tbody>
        </table>
        <p style="font-size:0.95em; color:#555;">This table provides a high-level comparison. Each tool has unique strengths and may be better suited for specific use cases or environments.</p>
    </div>

    <div class="container info">
        <h2>Which Monitoring Tool is Most Used?</h2>
        <p><strong>Datadog</strong> is currently the most widely used monitoring tool in the industry, especially for cloud-native and multi-cloud environments. Its popularity comes from broad integrations, ease of use, and strong adoption among DevOps and SRE teams.</p>
        <ul>
            <li><strong>Datadog</strong>: Most popular for general cloud and multi-cloud monitoring.</li>
            <li><strong>Dynatrace</strong>: Highly regarded for advanced AI-driven analysis and automation, especially in large enterprises.</li>
            <li><strong>New Relic</strong>: Widely adopted for application performance monitoring.</li>
            <li><strong>Azure Monitor</strong>: Most used within organizations heavily invested in Azure.</li>
        </ul>
        <p style="font-size:0.95em; color:#555;">The best tool for you depends on your environment, requirements, and existing cloud investments.</p>
    </div>

    <div class="container" style="margin-top:32px;">
        <h2>Dynatrace Free Trial</h2>
        <p>
            You can sign up for a Dynatrace free trial to explore its monitoring capabilities.<br>
            <a href="https://www.dynatrace.com/trial/" target="_blank">Start your Dynatrace Free Trial</a>
        </p>
        <p>
            For a step-by-step guide, see this video:<br>
            <a href="https://www.youtube.com/watch?v=PnNaR4PoggQ" target="_blank">How to Monitor Azure Web Apps with Dynatrace</a>
        </p>
        <p>
            Example Azure Web App created:<br>
            <a href="https://dynatracewebapp-g4crhbduh0cwepfx.eastus-01.azurewebsites.net/" target="_blank">dynatracewebapp-g4crhbduh0cwepfx.eastus-01.azurewebsites.net</a>
        </p>
        <p>
            Next, deploy the Dynatrace agent into your web app to view the observability data collected within Dynatrace.
        </p>
        <p>
            Access your Dynatrace account:<br>
            <a href="https://nbv50417.apps.dynatrace.com/ui/apps/dynatrace.launcher/getting-started" target="_blank">Dynatrace Portal</a>
        </p>
        <p>
            <strong>Environment ID:</strong> nbv50417
        </p>

        <h3>How to Enable Davis CoPilot in the New Dynatrace UI</h3>
        <ol>
            <li>
                <strong>Access your Dynatrace environment:</strong><br>
                <a href="https://nbv50417.apps.dynatrace.com/" target="_blank">https://nbv50417.apps.dynatrace.com/</a>
            </li>
            <li>
                <strong>Find Davis CoPilot settings:</strong>
                <ul>
                    <li>Use the search bar at the top of the Dynatrace UI (or press <kbd>/</kbd>).</li>
                    <li>Type <strong>Davis CoPilot</strong> and select the relevant settings page if available.</li>
                </ul>
            </li>
            <li>
                <strong>Enable or configure Davis CoPilot</strong> as needed, following the on-screen instructions.
            </li>
        </ol>
        <p>
            <strong>Tip:</strong> In the new Dynatrace UI, "Settings Classic" is no longer a separate section. Use the search bar or browse the Settings app to find Davis CoPilot configuration.
        </p>
        <h4>How to Use Davis CoPilot</h4>
        <ul>
            <li>Look for the search bar at the top or a chat icon (usually on the right side) in your Dynatrace UI.</li>
            <li>Interact with Davis CoPilot for AI-powered assistance and insights.</li>
        </ul>
    </div>

    <div class="container" style="margin-top:32px;">
        <h2>Adding Dynatrace Extension to Azure Portal</h2>
        <ol>
            <li>In the Azure Portal, go to your App Service instance.</li>
            <li>Navigate to <strong>Extensions</strong> in the left menu.</li>
            <li>Add the <strong>Dynatrace OneAgent</strong> extension.</li>
            <li>After adding, go to <strong>Settings</strong> &gt; <strong>Dynatrace OneAgent</strong> and click <strong>Browse</strong> to enter your credentials.</li>
        </ol>
        <p>
            You will be prompted for <strong>Environment ID</strong>, <strong>API Token</strong>, and <strong>Server URL</strong>.
        </p>
        <h3>Sample Prompt to Davis CoPilot</h3>
        <div class="note">
            Hi Davis, I want to start monitoring my App Service instance, but the OneAgent is not installed yet.<br>
            I see a form asking for Environment ID, API Token, and Server URL.<br>
            Where can I find my API Token in Dynatrace?<br>
            Also, can you guide me through the steps to install the OneAgent and restart my application for monitoring?
        </div>
        <h3>Sample Davis CoPilot Response</h3>
        <ul>
            <li>
                <strong>Finding Your API Token in Dynatrace:</strong>
                <ul>
                    <li>Navigate to the Dynatrace web UI.</li>
                    <li>Go to <strong>Settings &gt; Integration &gt; Dynatrace API</strong>.</li>
                    <li>Here, you can view, create, and manage your API tokens.</li>
                </ul>
            </li>
            <li>
                <strong>Installing the OneAgent and Restarting Your Application for Monitoring:</strong>
                <ol>
                    <li>
                        <strong>Download OneAgent:</strong>
                        <ul>
                            <li>Navigate to <strong>Deploy Dynatrace</strong> in the Dynatrace web UI.</li>
                            <li>Select <strong>Start installation</strong> and choose the appropriate environment (Windows, Linux, etc.).</li>
                            <li>Download the OneAgent installer.</li>
                        </ul>
                    </li>
                    <li>
                        <strong>Install OneAgent:</strong>
                        <ul>
                            <li>Run the downloaded installer on your server.</li>
                            <li>Follow the installation prompts to complete the setup.</li>
                        </ul>
                    </li>
                    <li>
                        <strong>Restart Application:</strong>
                        <ul>
                            <li>After installation, restart your application to ensure the OneAgent starts monitoring.</li>
                            <li>Verify the application is being monitored by checking the Dynatrace web UI under Applications or Services.</li>
                        </ul>
                    </li>
                </ol>
            </li>
        </ul>
        <p>These steps will help you set up monitoring for your application using Dynatrace OneAgent.</p>

        <p>After some time on Dynatrace, I finally found how to create the API token. The below instructions don't work:</p>
        <ul>
            <li>Go to <strong>Settings &gt; Integration &gt; Dynatrace API</strong>.</li>
            <li>Select <strong>API tokens</strong>.</li>
            <li>Click on <strong>Create token</strong>.</li>
            <li>Fill in the required fields and select the necessary permissions.</li>
            <li>Click on <strong>Create</strong>.</li>
        </ul>
        <p>
            For the correct way, use this link (if you have access):<br>
            <a href="https://nbv50417.apps.dynatrace.com/ui/apps/dynatrace.classic.tokens/ui/access-tokens?gtf=-2h&gf=all" target="_blank">Dynatrace Access Tokens</a>
        </p>

        <p>
            Dynatrace Classic Interface UI:<br>
            <a href="https://nbv50417.apps.dynatrace.com/ui/apps/dynatrace.classic.technologies/ui/entity/list/network:interfac" target="_blank">
                Open Dynatrace Classic Interface
            </a>



        </p>



<p>
    I finally typed <strong>integration</strong> in the Dynatrace search bar and found the correct link to create the token:<br>
    <a href="https://nbv50417.apps.dynatrace.com/ui/apps/dynatrace.classic.deploy.paas/#install/paas" target="_blank">
        Dynatrace PaaS Token Creation
    </a>
</p>
<p>
Environment ID:
nbv50417

    <strong>PaaS token :</strong><br>
    <code>[Set in .env as DYNATRACE_API_TOKEN]</code>
</p>

<div class="note" style="background: #fff3cd; border-left: 4px solid #ffb300; color: #7a5a00;">
    <strong>Important:</strong> I was able to download the Dynatrace agent by leaving the server URL blank.
</div>


when i run 
<a href="https://dynatracewebapp-g4crhbduh0cwepfx.eastus-01.azurewebsites.net/" target="_blank">
    https://dynatracewebapp-g4crhbduh0cwepfx.eastus-01.azurewebsites.net/
</a>

and i view the source , i will see the scripted injected by Dynatrace

 <script type="text/javascript" src="/ruxitagentjs_ICA7NVfqrux_10313250422105919.js" data-dtconfig="rid=RID_2418|rpid=-397475719|domain=eastus-01.azurewebsites.net|reportUrl=/rb_bf34198and|app=ea7c4b59f27d43eb|cuc=l39j601j|owasp=1|mel=100000|expw=1|featureHash=ICA7NVfqrux|dpvc=1|lastModification=1748065982527|postfix=l39j601j|tp=500,50,0|rdnt=1|uxrgce=1|agentUri=/ruxitagentjs_ICA7NVfqrux_10313250422105919.js"></script><link rel="stylesheet" href="/lib/bootstrap/dist/css/bootstrap.min.css" />
  
so now dynatrace is monitoring my web app


<h1>Dynatrace oneAgent</h1>

<h1>
    how to monitor this app is dynatrace 
</h1>

<div class="note" style="margin-bottom:24px;"></div>
    <strong>Tip:</strong> You can pin the "Settings Classic" menu in Dynatrace by searching for it in the search bar.
</div>
<p>
    Next, go to <strong>Monitoring Overview</strong> in Dynatrace.
</p>
<p>
    The <strong>Monitoring Overview</strong> displays detected hosts, process groups, and applications. Each entry has a switch to enable or disable monitoring. You can also find OneAgent and ActiveGate installers for various platforms here, making it easy to support monitoring across different environments.
</p>
<ul>
    <li>
        <strong>Application:</strong> Shows your frontend applications (web or mobile), monitoring user activity, performance, and errors.
    </li>
    <li>
        <strong>Host:</strong> Lists physical, virtual, or cloud-based servers running your apps, with system metrics like CPU, memory, and disk usage.
    </li>
    <li>
        <strong>Process Groups:</strong> Groups related running processes (such as web servers or background jobs) to monitor performance, restarts, failures, and service dependencies.
    </li>
</ul>




</div>
<div class="container info" style="margin-top:32px;">
    <h2>How Dynatrace OneAgent Works</h2>
    <p>
        <strong>Dynatrace OneAgent</strong> provides automatic, out-of-the-box monitoring by detecting applications and capturing metrics, traces, errors, and logs without requiring code changes. Unlike some tools like New Relic, which often need explicit instrumentation in the app, Dynatrace works seamlessly once installed on the host. However, developers can optionally add custom traces or logs for deeper insights, but it’s not mandatory to get comprehensive monitoring.
    </p>
</div>

<div class="container" style="margin-top:32px;">
    <h2>Serilog vs. OpenTelemetry</h2>
    <p>
        <strong>Serilog</strong> is a structured logging library for .NET, focused on capturing and formatting logs with rich data. It supports various sinks (outputs) like files, databases, and cloud log services.
    </p>
    <p>
        <strong>OpenTelemetry</strong> is a cross-platform observability framework for collecting <b>logs</b>, <b>metrics</b>, and <b>traces</b> from distributed systems. It provides a vendor-neutral way to instrument applications and export telemetry data to backends like Dynatrace, Azure Monitor, or others.
    </p>
    <ul>
        <li>
            <b>Serilog:</b> Best for structured logging in .NET apps; can be integrated with OpenTelemetry for unified observability.
        </li>
        <li>
            <b>OpenTelemetry:</b> Standardizes collection of logs, metrics, and traces across platforms and languages.
        </li>
    </ul>
    <p>
        <b>Tip:</b> Use Serilog for advanced logging in your .NET app, and export those logs to OpenTelemetry for centralized monitoring and analysis in tools like Dynatrace.
    </p>
</div></p>

<div class="container">
        <h1>OpenTelemetry to Dynatrace: How to Know When You Have Real Access</h1>
        <p>
            <strong>To send OpenTelemetry traces and logs directly to Dynatrace, you need a <em>classic API token</em> with the following scopes:</strong>
        </p>
        <ul>
            <li><code>Ingest OpenTelemetry traces</code></li>
            <li><code>Ingest logs</code></li>
        </ul>
        <p>
            <strong>With a trial account, you may only be able to generate a <em>Platform Token</em>, which does <u>not</u> support these scopes.</strong>
        </p>
        <h2>How to Know You Have Real Access</h2>
        <ol>
            <li>Go to <b>Settings &gt; Integration &gt; Dynatrace API</b> in your Dynatrace environment.</li>
            <li>Try to create a new <b>API token</b> (not a Platform token).</li>
            <li>
                <b>If you see the option to add:</b>
                <ul>
                    <li><code>Ingest OpenTelemetry traces</code></li>
                    <li><code>Ingest logs</code></li>
                </ul>
                <b>...then you have real access for OpenTelemetry ingestion!</b>
            </li>
            <li>
                <b>If you only see Platform token options, you do <u>not</u> have real access yet.</b>
            </li>
        </ol>
        <h2>Alternative: Use Dynatrace OneAgent</h2>
        <p>
            If you cannot create a classic API token, install <b>Dynatrace OneAgent</b> on your server or development machine. OneAgent will automatically instrument your .NET app and send traces/logs to Dynatrace without needing a token.
        </p>
        <h2>How to Add Dynatrace OneAgent to a .NET Core Application</h2>
        <ol>
            <li>
                <b>Download OneAgent:</b><br>
                Log in to Dynatrace, go to <b>Deploy Dynatrace</b> &gt; <b>Start installation</b> and download the OneAgent installer for your OS.
            </li>
            <li>
                <b>Install OneAgent:</b><br>
                Run the installer on your server or development machine. Follow the on-screen instructions.
            </li>
            <li>
                <b>Restart your .NET Core application.</b>
            </li>
            <li>
                <b>Verify:</b><br>
                In Dynatrace, go to <b>Transactions & services</b> and check for your application's traces and logs.
            </li>
        </ol>
        <p>
            <b>Note:</b> No code changes are needed in your .NET Core app when using OneAgent. It auto-instruments your app.
        </p>
        <h2>How to Configure OpenTelemetry Exporter for Dynatrace in .NET</h2>
        <ol>
            <li>
                <b>Add NuGet Packages:</b><br>
                <code>OpenTelemetry.Extensions.Hosting</code>, <code>OpenTelemetry.Instrumentation.AspNetCore</code>, <code>OpenTelemetry.Instrumentation.Http</code>, <code>OpenTelemetry.Exporter.Otlp</code>
            </li>
            <li>
                <b>Update <code>Program.cs</code>:</b><br>
                <pre>// ...existing code...
builder.Services.AddOpenTelemetry()
    .WithTracing(tracerProviderBuilder =>
    {
        tracerProviderBuilder
            .SetResourceBuilder(ResourceBuilder.CreateDefault().AddService("DynatraceWebApp"))
            .AddAspNetCoreInstrumentation()
            .AddHttpClientInstrumentation()
            .AddOtlpExporter(otlpOptions =>
            {
                otlpOptions.Endpoint = new Uri("https://&lt;your-environment-id&gt;.live.dynatrace.com/api/v2/otlp/v1/traces");
                otlpOptions.Headers = "Authorization=Api-Token &lt;your-api-token&gt;";
            });
    });
// ...existing code...
</pre>
            </li>
            <li>
                <b>Replace <code>&lt;your-environment-id&gt;</code> and <code>&lt;your-api-token&gt;</code> with your Dynatrace values.</b>
            </li>
            <li>
                <b>Restart your application.</b>
            </li>
            <li>
                <b>Check Dynatrace for traces and logs.</b>
            </li>
        </ol>
        <p style="font-size:0.95em;color:#666;">
            This page is mobile and desktop friendly.
        </p>
    </div>

</body>
</html>
